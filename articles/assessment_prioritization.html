<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Stock assessment prioritization for West Coast groundfish • wcsap</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Stock assessment prioritization for West Coast groundfish">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">wcsap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/assessment_prioritization.html">Stock assessment prioritization for West Coast groundfish</a></li>
    <li><a class="dropdown-item" href="../articles/species%20data%20filtering.html">Filtering data for non-coastwide FMCspecies</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Stock assessment prioritization for West Coast groundfish</h1>
                        <h4 data-toc-skip class="author">Chantel
Wetzel</h4>
            
            <h4 data-toc-skip class="date">2025-09-25</h4>
      

      <div class="d-none name"><code>assessment_prioritization.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This document describes the process of calculating Stock Assessment
Prioritization for West Coast groundfish. Information is provided below
on the package structure, data used, and the code used to calculate
ranking across the factors.</p>
</div>
<div class="section level2">
<h2 id="package-structure">Package structure<a class="anchor" aria-label="anchor" href="#package-structure"></a>
</h2>
<p>This repository is structured like an R package to ease the
installation process and increase the ability to easily test code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">└───_targets</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">├───data-processed</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">│</span>   └───2022 </span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="ex">│</span>   └───2024 </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="ex">├───data-raw</span> <span class="er">(</span><span class="fu">git</span> ignored<span class="kw">)</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="ex">│</span>   └───2022 </span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="ex">│</span>   └───2024</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="ex">├───doc</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="ex">│</span>   └───figures</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="ex">│</span>   └───tables</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="ex">├───man</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="ex">├───model_files</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="ex">├───presentations</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="ex">├───R</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="ex">└───vignettes</span></span></code></pre></div>
<p>Additionally, this project uses <a href="https://books.ropensci.org/targets/" class="external-link"><code>targets</code></a>, a
pipeline tool, to identify objects that are current and out-of-date. The
<code>_targets.R</code> script in the base package folder also provides
clear linkage between loaded data, data filtering, and processing.</p>
<div class="section level3">
<h3 id="targets">_targets<a class="anchor" aria-label="anchor" href="#targets"></a>
</h3>
<p>Data tracking objects created by the <code>_targets.R</code> script
are stored here. Since confidential data are included in the data
objects created by <code>targets</code>, this folder should not be
pushed to Github. The <code>targets</code> data objects are used to
track which items in the <code>_targets.R</code> script are out of date,
allowing for non-dependent data objects to not be reprocessed to updated
the whole pipeline.</p>
</div>
<div class="section level3">
<h3 id="data-processed">data-processed<a class="anchor" aria-label="anchor" href="#data-processed"></a>
</h3>
<p>The output from each of <code>summarize...()</code> function is save
in the folder. After stock assessment prioritization concludes, these
files should be archived in a year folder in this location (e.g.,
<code>data-processed/2026</code>). These file are pushed to Github and
no confidential information should be stored in this folder.</p>
</div>
<div class="section level3">
<h3 id="data-raw">data-raw<a class="anchor" aria-label="anchor" href="#data-raw"></a>
</h3>
<p>Raw data files used to calculate each of the stock assessment
prioritization factors are stored here. After stock assessment
prioritization concludes, these files should be archived in a year
folder in this location (e.g., <code>data-raw/2026</code>). These file
are NOT pushed to Github since some of the data files contain
confidential information.</p>
</div>
<div class="section level3">
<h3 id="doc">doc<a class="anchor" aria-label="anchor" href="#doc"></a>
</h3>
<p>Files used to create the methodology document. These files may be
migrated to vignettes for each factor hosted on a Github published
webpage (or on Posit Connect).</p>
</div>
<div class="section level3">
<h3 id="man">man<a class="anchor" aria-label="anchor" href="#man"></a>
</h3>
<p>Function documentation files.</p>
</div>
<div class="section level3">
<h3 id="model_files">model_files<a class="anchor" aria-label="anchor" href="#model_files"></a>
</h3>
<p>Cleaned up SS3 model files for the most recent assessment for
groundfish species. Currently, not all groundfish model files are
included here, but rather the files from 2017 onward. Information
included in the Report files are used to determine metric about the
population that are used for the stock status and assessment frequency
factors.</p>
</div>
<div class="section level3">
<h3 id="presentations">presentations<a class="anchor" aria-label="anchor" href="#presentations"></a>
</h3>
</div>
<div class="section level3">
<h3 id="r">R<a class="anchor" aria-label="anchor" href="#r"></a>
</h3>
<p>All the functions used in calculating each factor, functions for data
filtering and foramtting. This folder should contain only <code>R</code>
functions and each function should be properly documented.</p>
</div>
<div class="section level3">
<h3 id="vignettes">vignettes<a class="anchor" aria-label="anchor" href="#vignettes"></a>
</h3>
<p>Rmarkdown files used to create content on the webpage that provides
information about the Stock Assessment Prioritization and the
package.</p>
</div>
</div>
<div class="section level2">
<h2 id="data-files-that-are-stored-in-the-data-raw-folder">Data files that are stored in the data-raw folder<a class="anchor" aria-label="anchor" href="#data-files-that-are-stored-in-the-data-raw-folder"></a>
</h2>
<p>A description of each of the data files needed for conducting Stock
Assessment Prioritization is provided below.</p>
<ul>
<li>SSC Recommendations:
<ul>
<li>The most recent assessment year and SSC recommendation is stored in
assess_year_ssc_rec.csv in the data-raw folder. This file should be
updated by hand each year to update the assessment year and the SSC
recommendation for the next assessment.</li>
<li>This information is used by <code><a href="../reference/summarize_new_information.html">summarize_new_information()</a></code>
to determine the period of time to evaluate new survey data by
species.</li>
<li>This information is used by <code><a href="../reference/summarize_revenue.html">summarize_revenue()</a></code> for
both commercial and tribal fisheries and
<code><a href="../reference/summarize_rec_importance.html">summarize_rec_importance()</a></code> to calculate adjustment factors
for scoring species that were assessed in the previous assessment
cycle.</li>
</ul>
</li>
<li>Previous harvest specifications:
<ul>
<li>Adopted harvest specifications are downloaded from <a href="https://reports.psmfc.org/pacfin/f?p=501:5301:2460998972960:::::" class="external-link">PacFIN
APEX GMT015 report</a>. The years selected to download should be the
most recent five from the previous year (current year - 1). This
information is used by summarize_fishing_mortality() to determine the
recent average attainment compared to the adopted harvest
specifications.
<ul>
<li>Unfortunately, there are typically a number of things that need to
be corrected by hand in this file. Rockfish species managed in a complex
are listed without Rockfish in their species name (e.g., China,
Vermillion, etc.). I tried grepping the file only using the first word
in the species name but had issues identifying the correct values.<br>
</li>
<li>There are duplicate entries (e.g., S of 4010, S of 3427, 4010-3428)
for multipel speciesthat need to be removed to ensure that the correct
OFL and ACL values are found. The species where this is an issue are:
cowcod, shortspine thornyhead, longspine thornyhead, lingcod</li>
</ul>
</li>
<li>This harvest specifications from recent years by species is used
within the <code><a href="../reference/summarize_fishing_mortality.html">summarize_fishing_mortality()</a></code> to score average
attainment.</li>
</ul>
</li>
<li>Mortality:
<ul>
<li>Groundfish Expanded Multiyear Mortality (GEMM) data is used to
determine mortality for each species. These data should be downloaded
using nwfscSurvey::pull_gemm().</li>
<li>The average catch by species is used within
<code><a href="../reference/summarize_fishing_mortality.html">summarize_fishing_mortality()</a></code> and
<code><a href="../reference/summarize_rec_importance.html">summarize_rec_importance()</a></code> to compare against the average
OFL and ACL.</li>
</ul>
</li>
<li>Future harvest specifications:
<ul>
<li>Future harvest specifications are downloaded from <a href="https://reports.psmfc.org/pacfin/f?p=501:530:2460998972960:::::" class="external-link">PacFIN
APEX GMT008 report</a>. There are often default and alternative harvest
specifications available and the harvest specifications that are
considered to be most likely adopted are used. This selection is
subjective. The draft harvest specifications need to be downloaded for
each year separately and then combined into a single csv file.</li>
<li>This proposed harvest specifications for the upcoming management
cycle by species is used within the
<code><a href="../reference/summarize_const_demand.html">summarize_const_demand()</a></code> to identify species that may pose
future management constraint given recent average catches.</li>
</ul>
</li>
<li>Revenue:
<ul>
<li>Revenue information is downloaded from PacFIN using the QueryBuilder
available on PacFIN online with a user account. The columns used are
AGENCY_CODE, COUNCIL_CODE, PACFIN_GROUP_GEAR_CODE,
PACFIN_SPECIES_COMMON_NAME, PACFIN_YEAR, AFI_EXVESSEL_REVENUE,
FLEET_CODE, and NOMINAL_TO_ACTUAL_PACFIN_SPECIES_NAME. <strong>These
data are confidential and should not be stored in a public Github
repository.</strong>
</li>
<li>PacFIN data for ex-vessel revenue by species used by
<code><a href="../reference/summarize_revenue.html">summarize_revenue()</a></code> for both commercial and tribal
fisheries. This information is also used by
<code><a href="../reference/summarize_const_demand.html">summarize_const_demand()</a></code> by gear type to identify potential
within sector constraints.</li>
</ul>
</li>
<li>Tribal Scores:
<ul>
<li>Tribal importance captures the value by species to Tribes based on
both commercial sale and susbsistance and ceremonial uses. This
information has been provided from Tribal representatives
(data-raw/tribal_score.csv).</li>
</ul>
</li>
<li>Recreational Scores:
<ul>
<li>Captures the importance for each species to state recreational
fisheries. This information has been provided by State representatives
(data-raw/recr_importance.csv).</li>
</ul>
</li>
<li>Abundance Measures:
<ul>
<li>Abundance is calculated from the most recent assessment for each
species. The abundance values from the previous stock assessment
prioritization cycle is read in as the initial data and is updated and
saved based upon the models in the <code>model_files</code> folder. The
file from the previous cycle is found in the in data-processed/previous
sap year/abundance_processed.csv and the updated file is saved in
data-processed/current sap year/abundance_processed.csv.</li>
<li>This information is used and modifed by
<code><a href="../reference/summarize_stock_status.html">summarize_stock_status()</a></code>.</li>
</ul>
</li>
<li>Survey Data:
<ul>
<li>Data from the NWFSC West Coast Groundfish Bottom Trawl Survey
(WCGBTS). These data should be pulled using
<code><a href="https://rdrr.io/pkg/nwfscSurvey/man/pull_catch.html" class="external-link">nwfscSurvey::pull_catch()</a></code> and
<code><a href="https://rdrr.io/pkg/nwfscSurvey/man/pull_bio.html" class="external-link">nwfscSurvey::pull_bio()</a></code>.</li>
<li>Data from the NWFS Hook-and-Line Survey. These data are maintained
by John Harms and an updated data file should be requested from him each
cycle.</li>
</ul>
</li>
<li>Model Files:
<ul>
<li>The most recent assessment model files from 2017 onward.<br>
</li>
<li>The <code><a href="../reference/clean_model_files.html">clean_model_files()</a></code> should be used to remove all
unnecessary model files within each folder to reduce the number of files
saved.</li>
<li>The information in the model files will be used to calculate stock
status and population metrics in
<code><a href="../reference/summarize_stock_status.html">summarize_stock_status()</a></code>.</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<ol style="list-style-type: decimal"><li>
</li></ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chantel R. Wetzel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
